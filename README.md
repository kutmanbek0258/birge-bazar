# Birge Bazar Microservices

Моно-репозиторий для проекта **Birge Bazar** — маркетплейса, реализованного на архитектуре микросервисов.

## Структура монорепозитория

- `config-server` — централизованный сервер конфигураций Spring Cloud.
- `discovery-server` — сервис-реестр Eureka для обнаружения микросервисов.
- `api-gateway` — единая точка входа, маршрутизация и фильтрация запросов.
- `auth-service` — сервис аутентификации и авторизации пользователей.
- `user-service` — управление пользователями, профили.
- `product-service` — управление товарами и каталогом.
- `cart-service` — корзина покупок пользователей.
- `order-service` — оформление и обработка заказов.
- `payment-service` — обработка платежей.
- `wms-service` — складской учет и управление запасами.
- `tracking-service` — отслеживание доставки заказов.
- `notification-service` — уведомления пользователям (email, push).
- `review-service` — отзывы и рейтинги товаров.
- `admin-service` — административные функции.
- `search-service` — полнотекстовый поиск товаров (Elasticsearch).
- `common-lib` — общие библиотеки и модели между сервисами.

---

## Описание микросервисов и TODO

### config-server
**Назначение:** централизованное хранение и раздача конфигураций.
- TODO:
    - [ ] Добавить шифрование чувствительных свойств.
    - [ ] Настроить автоматическое обновление конфигов при изменении в репозитории.

---

### discovery-server
**Назначение:** Eureka Server — сервис-реестр для обнаружения микросервисов.
- TODO:
    - [ ] Настроить мониторинг состояния сервисов.
    - [ ] Включить защиту доступа к реестру.

---

### api-gateway
**Назначение:** входная точка, маршрутизация, фильтрация, CORS, rate-limiting, авторизация.
- TODO:
    - [ ] Добавить централизованную обработку ошибок.
    - [ ] Реализовать троттлинг и лимиты по IP/пользователю.
    - [ ] Подключить tracing/логирование запросов.

---

### auth-service
**Назначение:** регистрация, вход, JWT, refresh tokens.
- TODO:
    - [ ] Добавить OAuth2/Social login.
    - [ ] Реализовать блокировку пользователей при подозрительной активности.
    - [ ] Вести аудит входов.

---

### user-service
**Назначение:** профиль пользователя, изменения данных, ролей.
- TODO:
    - [ ] Реализовать историю изменений профиля.
    - [ ] Добавить аватары пользователей.

---

### product-service
**Назначение:** товары, категории, фильтрация, управление остатками.
- TODO:
    - [ ] Импорт/экспорт товаров (CSV, Excel).
    - [ ] Массовое обновление цен.
    - [ ] Поддержка вложенных категорий.

---

### cart-service
**Назначение:** корзина покупок для пользователей.
- TODO:
    - [ ] Сохранение корзины для незарегистрированных пользователей.
    - [ ] Восстановление корзины после входа.
    - [ ] Ограничения по количеству товаров.

---

### order-service
**Назначение:** оформление, изменение статусов, история заказов.
- TODO:
    - [ ] Интеграция с сервисом возвратов.
    - [ ] Расширенная аналитика по заказам.

---

### payment-service
**Назначение:** оплата заказов, интеграция с платежными шлюзами.
- TODO:
    - [ ] Добавить поддержку новых платежных провайдеров.
    - [ ] Вести журнал транзакций с retry.

---

### wms-service
**Назначение:** складской учет, остатки, отгрузки.
- TODO:
    - [ ] Реализовать интеграцию с внешними WMS.
    - [ ] Добавить мобильный интерфейс для сотрудников склада.

---

### tracking-service
**Назначение:** отслеживание доставок и статусов посылок.
- TODO:
    - [ ] Интеграция с внешними службами доставки.
    - [ ] История перемещений заказа.

---

### notification-service
**Назначение:** отправка email, push, SMS уведомлений.
- TODO:
    - [ ] Мультиканальные уведомления.
    - [ ] Конфигурируемость шаблонов.

---

### review-service
**Назначение:** отзывы и рейтинги товаров.
- TODO:
    - [ ] Модерация отзывов.
    - [ ] Ответы продавца на отзывы.

---

### admin-service
**Назначение:** административные панели и возможности управления.
- TODO:
    - [ ] Дашборды для мониторинга.
    - [ ] Управление пользователями и правами.

---

### search-service
**Назначение:** полнотекстовый поиск товаров через Elasticsearch.
- TODO:
    - [ ] Индексация отзывов и категорий.
    - [ ] Улучшение релевантности поиска.
    - [ ] Поддержка синонимов.

---

### common-lib
**Назначение:** общие DTO, утилиты, конфиги.
- TODO:
    - [ ] Вынести все повторяющиеся модели.
    - [ ] Тестовое покрытие общих библиотек.

---

## Быстрый старт (локально)

```bash
# собрать все
mvn clean package

# собрать и запустить через docker-compose
docker compose up --build
```

---

## CI/CD

- Используется GitHub Actions: `.github/workflows/ci-cd.yml`
- Базовые стадии: build, test, docker build, deploy

---

## TODO (глобально)
- [ ] Покрыть сервисы интеграционными тестами.
- [ ] Описать OpenAPI/Swagger для всех сервисов.
- [ ] Подключить централизованное логирование и мониторинг (ELK, Prometheus, Grafana).
- [ ] Настроить Graylog/Sentry для ошибок.
- [ ] Поддержка production-ready окружения (Kubernetes, Helm).