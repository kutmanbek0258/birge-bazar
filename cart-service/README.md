# Cart Service

Этот сервис отвечает за управление корзинами покупок пользователей в системе Birge-Bazar.

## Описание

Сервис использует **Redis** для хранения данных корзин, что обеспечивает высокую производительность и масштабируемость. Он предоставляет REST API для добавления, удаления и просмотра товаров в корзине текущего аутентифицированного пользователя.

## Технологии

*   **Java 17**
*   **Spring Boot 3.2.5**
*   **Spring Data Redis**
*   **Spring Cloud**
*   **Spring Security (OAuth2)**
*   **Maven**

## API Endpoints

Все эндпоинты доступны по префиксу `/api/v1/cart` и требуют валидного Bearer Token.

---

### 1. Получить корзину

*   **GET** `/`
*   **Описание:** Возвращает содержимое корзины текущего пользователя. Если корзины нет, возвращается пустая корзина.
*   **Ответ (200 OK):**

```json
{
  "userId": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
  "items": [
    {
      "productId": 101,
      "quantity": 2
    },
    {
      "productId": 205,
      "quantity": 1
    }
  ]
}
```

---

### 2. Добавить товар в корзину

*   **POST** `/items`
*   **Описание:** Добавляет товар в корзину или увеличивает его количество, если он уже там.
*   **Тело запроса:**

```json
{
  "productId": 310,
  "quantity": 1
}
```

*   **Ответ (200 OK):** Обновленное состояние корзины.

---

### 3. Удалить товар из корзины

*   **DELETE** `/items/{productId}`
*   **Описание:** Полностью удаляет товар из корзины.
*   **Параметры пути:**
    *   `productId`: `Long` - ID товара для удаления.
*   **Ответ (200 OK):** Обновленное состояние корзины.

---

### 4. Очистить корзину

*   **DELETE** `/`
*   **Описание:** Полностью удаляет все товары из корзины текущего пользователя.
*   **Ответ (204 No Content):** Пустой ответ в случае успеха.

## Локальный запуск

1.  **Настройте Redis:**
    *   Убедитесь, что у вас запущен экземпляр Redis (например, через Docker).
    *   Настройте подключение в `application.yml`, если оно отличается от `localhost:6379`.

2.  **Запустите зависимости:**
    *   Убедитесь, что запущены `config-server`, `discovery-server` и `auth-service`.

3.  **Сборка и запуск:**
    *   Выполните команду Maven для сборки проекта:
        ```bash
        mvn clean install
        ```
    *   Запустите приложение:
        ```bash
        java -jar target/cart-service.jar
        ```
