# Seller Service

Этот сервис отвечает за управление профилями продавцов и их сотрудниками в системе Birge-Bazar.

## Описание

Сервис предоставляет REST API для пользователей, чтобы они могли зарегистрироваться в качестве продавца, управлять информацией о своем магазине и добавлять сотрудников для управления операциями. Все эндпоинты требуют аутентификации.

## Технологии

*   **Java 17**
*   **Spring Boot 3.2.5**
*   **Spring Cloud**
*   **PostgreSQL**
*   **Liquibase**
*   **MapStruct**
*   **Maven**

## API Endpoints

Все эндпоинты доступны по префиксу `/api/v1/seller-dashboard` и требуют валидного Bearer Token.

---

### 1. Создать профиль продавца

*   **POST** `/`
*   **Описание:** Создает новый профиль продавца для аутентифицированного пользователя. Один пользователь может иметь только один профиль продавца.
*   **Тело запроса:**

```json
{
  "shopName": "Мой Магазин",
  "description": "Лучшие товары в городе.",
  "contactEmail": "shop@example.com",
  "contactPhone": "+996555123456"
}
```

*   **Ответ (201 Created):** Созданный объект `SellerDto`.
*   **Ошибки:**
    *   `409 Conflict`: Если у пользователя уже есть профиль продавца.

---

### 2. Получить информацию о своем магазине

*   **GET** `/`
*   **Описание:** Возвращает полную информацию о профиле продавца для текущего пользователя.
*   **Ответ (200 OK):** Объект `SellerDto`.
*   **Ошибки:**
    *   `404 Not Found`: Если профиль продавца для текущего пользователя не найден.

---

### 3. Обновить информацию о своем магазине

*   **PUT** `/`
*   **Описание:** Обновляет информацию о профиле продавца.
*   **Тело запроса:** `UpdateSellerDto` (поля аналогичны созданию, но опциональны).
*   **Ответ (200 OK):** Обновленный объект `SellerDto`.

---

### 4. Получить список сотрудников

*   **GET** `/staff`
*   **Описание:** Возвращает список всех сотрудников, привязанных к магазину текущего пользователя.
*   **Ответ (200 OK):** Массив объектов `SellerStaffDto`.

---

### 5. Пригласить сотрудника

*   **POST** `/staff`
*   **Описание:** Добавляет нового сотрудника в магазин.
*   **Тело запроса:**

```json
{
  "userId": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
  "role": "MANAGER"
}
```

*   **Ответ (201 Created):** Созданный объект `SellerStaffDto`.

---

### 6. Обновить данные сотрудника

*   **PUT** `/staff/{staffUserId}`
*   **Описание:** Обновляет роль или статус сотрудника.
*   **Параметры пути:**
    *   `staffUserId`: `UUID` пользователя-сотрудника.
*   **Тело запроса:**
```json
{
  "role": "PRODUCT_MANAGER",
  "isActive": false
}
```
*   **Ответ (200 OK):** Обновленный объект `SellerStaffDto`.

---

### 7. Удалить сотрудника

*   **DELETE** `/staff/{staffUserId}`
*   **Описание:** Удаляет сотрудника из магазина.
*   **Параметры пути:**
    *   `staffUserId`: `UUID` пользователя-сотрудника.
*   **Ответ (204 No Content):** Пустой ответ в случае успеха.

## Локальный запуск

1.  **Настройте базу данных:**
    *   Убедитесь, что у вас запущен PostgreSQL.
    *   Создайте базу данных (например, `seller_db`) и схему (`sellers`).
    *   Настройте подключение в `application.yml` или через переменные окружения.

2.  **Запустите зависимости:**
    *   Убедитесь, что запущены `config-server`, `discovery-server` и `auth-service`.

3.  **Сборка и запуск:**
    *   Выполните команду Maven для сборки проекта:
        ```bash
        mvn clean install
        ```
    *   Запустите приложение:
        ```bash
        java -jar target/seller-service.jar
        ```