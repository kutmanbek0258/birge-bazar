# Сводное Руководство по API для MVP "Birge-Bazar"

Этот документ предоставляет обзор всех REST API эндпоинтов, доступных в MVP. Все эндпоинты доступны через **API Gateway** (например, `http://localhost:8080`) и требуют `Bearer Token` для аутентификации, если не указано иное.

---

## 1. Аутентификация (`auth-service`)

*   **`POST /oauth2/token`**: Получение токена (детали зависят от grant type).
*   **`POST /api/v1/auth/register`**: Регистрация нового пользователя.

---

## 2. Профиль пользователя (`user-service`)

**Префикс:** `/api/v1/profile`

*   **`GET /me`**: Получить профиль текущего пользователя.
*   **`PUT /me`**: Обновить профиль текущего пользователя.
*   **`GET /addresses`**: Получить список адресов доставки.
*   **`POST /addresses`**: Добавить новый адрес.
*   **`PUT /addresses/{addressId}`**: Обновить адрес.
*   **`DELETE /addresses/{addressId}`**: Удалить адрес.

---

## 3. Профиль продавца (`seller-service`)

**Префикс:** `/api/v1/seller-dashboard`

*   **`POST /`**: Создать профиль продавца для текущего пользователя.
*   **`GET /`**: Получить информацию о своем магазине.
*   **`PUT /`**: Обновить информацию о своем магазине.
*   **`GET /staff`**: Получить список сотрудников.
*   **`POST /staff`**: Пригласить сотрудника.
*   **`PUT /staff/{staffUserId}`**: Обновить данные сотрудника.
*   **`DELETE /staff/{staffUserId}`**: Удалить сотрудника.

---

## 4. Продукты (`product-service`)

**Префикс:** `/api/v1/products`

*   **`GET /`**: Получить постраничный список продуктов. **(Публичный)**
*   **`GET /{id}`**: Получить детальную информацию о продукте. **(Публичный)**
*   **`POST /`**: Создать новый продукт. (Требуется `scope=seller`)
*   **`PUT /{id}`**: Обновить продукт. (Требуется `scope=seller`)
*   **`DELETE /{id}`**: Удалить продукт. (Требуется `scope=admin`)

---

## 5. Корзина (`cart-service`)

**Префикс:** `/api/v1/cart`

*   **`GET /`**: Получить содержимое корзины.
*   **`POST /items`**: Добавить товар в корзину.
    *   Тело запроса: `{ "productId": Long, "quantity": Integer }`
*   **`DELETE /items/{productId}`**: Удалить товар из корзины.
*   **`DELETE /`**: Очистить корзину.

---

## 6. Заказы (`order-service`)

**Префикс:** `/api/v1/orders`

*   **`POST /`**: Создать заказ из корзины.
    *   Тело запроса: `{ "shippingAddressId": Long }`
*   **`GET /`**: Получить историю своих заказов.
*   **`GET /{id}`**: Получить детали конкретного заказа.

---

## 7. Оплата (`payment-service`)

**Префикс:** `/api/v1/payments`

*   **`POST /`**: Имитировать процесс оплаты.
    *   Тело запроса: `{ "orderId": Long, "amount": BigDecimal }`
    *   Ответ: `{ "paymentId": String, "status": "SUCCESS" | "FAILED" }`

