# План Разработки MVP Проекта "Birge-Bazar"

## 1. Введение и Философия

Этот документ описывает стратегию и поэтапный план разработки минимально жизнеспособного продукта (MVP) для проекта "Birge-Bazar". Цель — в кратчайшие сроки запустить основную функциональность маркетплейса, на которой можно будет проверить бизнес-гипотезы и привлечь первых пользователей.

План основан на анализе существующей кодовой базы и UI-документации. Мы будем использовать уже созданную инфраструктуру и дорабатывать существующие сервисы, а также реализовывать недостающие ключевые компоненты.

## 2. Определение MVP

MVP будет сфокусирован на основном пользовательском сценарии: **покупка товара**.

### Функционал, входящий в MVP:
- **Аутентификация:** Регистрация и вход пользователей.
- **Управление профилем:** Базовое управление профилем пользователя (просмотр, редактирование).
- **Регистрация продавца:** Возможность для пользователя стать продавцом и создать свой магазин.
- **Управление товарами:** Создание и редактирование товаров продавцом.
- **Каталог:** Просмотр списка товаров и детальной информации о них.
- **Корзина:** Добавление товаров в корзину и управление ею.
- **Оформление заказа:** Создание заказа из корзины.
- **Оплата (Mock):** Имитация процесса оплаты для завершения заказа.

### Функционал, НЕ входящий в MVP:
- Система отзывов и рейтингов (`review-service`).
- Панель администратора (`admin-service`).
- Сложные дашборды для продавцов.
- Системы логистики и отслеживания (`logistics-service`, `tracking-service`).
- Система уведомлений (`notification-service`).
- Полноценный поиск (`search-service` будет заглушкой).

## 3. Текущее Состояние Проекта

| Сервис | Статус | Необходимые действия | Приоритет |
| :--- | :--- | :--- | :--- |
| `config-server` | **Функционален** | - | **CORE** |
| `discovery-server`| **Функционален** | - | **CORE** |
| `api-gateway` | **Функционален** | - | **CORE** |
| `auth-service` | **Функционален** | Проверить консистентность `userId` (UUID). | **CORE** |
| `seller-service` | **Функционален** | Тип `userId` исправлен на `UUID`. | **DONE** |
| `product-service` | **Функционален** | Тип `sellerId` (userId) исправлен на `UUID`. | **DONE** |
| `user-service` | **Не реализован** | Реализовать с нуля. | **ВЫСОКИЙ** |
| `cart-service` | **Не реализован** | Реализовать с нуля. | **ВЫСОКИЙ** |
| `order-service` | **Не реализован** | Реализовать с нуля. | **ВЫСОКИЙ** |
| `payment-service` | **Не реализован** | Реализовать с нуля (в виде mock-сервиса). | **ВЫСОКИЙ** |
| `review-service` | **Реализован** | Отложить до Post-MVP. | **НИЗКИЙ** |
| `notification-service`| **Не реализован** | Отложить до Post-MVP. | **НИЗКИЙ** |
| `logistics-service` | **Не реализован** | Отложить до Post-MVP. | **НИЗКИЙ** |
| `tracking-service` | **Не реализован** | Отложить до Post-MVP. | **НИЗКИЙ** |
| `admin-service` | **Не реализован** | Отложить до Post-MVP. | **НИЗКИЙ** |

## 4. Поэтапный План Разработки

### Этап 1: Управление Пользователями и Профилями
**Цель:** Создать основу для всех действий пользователей в системе.
1.  **Реализовать `user-service`:**
    *   **Модель:** `User` (id, name, email, etc.), `Address`.
    *   **API:**
        *   `GET /api/v1/users/me`: Получение информации о своем профиле.
        *   `PUT /api/v1/users/me`: Обновление своего профиля.
        *   `GET /api/v1/users/me/addresses`: Получение своих адресов доставки.
        *   `POST /api/v1/users/me/addresses`: Добавление нового адреса.
        *   `DELETE /api/v1/users/me/addresses/{id}`: Удаление адреса.
    *   **Интеграция:** Сервис должен быть защищен и работать с `auth-service` для получения `userId`.

### Этап 2: Транзакционное Ядро
**Цель:** Реализовать полный цикл покупки товара.
1.  **Реализовать `cart-service`:**
    *   **Модель:** `Cart` (userId), `CartItem` (productId, quantity).
    *   **API:**
        *   `GET /api/v1/cart`: Получение содержимого корзины.
        *   `POST /api/v1/cart/items`: Добавление товара в корзину.
        *   `DELETE /api/v1/cart/items/{productId}`: Удаление товара из корзины.
        *   `DELETE /api/v1/cart`: Очистка корзины.
    *   **Технология:** Используется PostgreSQL для хранения корзин, обеспечивая надежность и консистентность данных.

2.  **Реализовать `order-service`:**
    *   **Модель:** `Order` (userId, status, totalAmount, shippingAddress), `OrderItem`.
    *   **API:**
        *   `POST /api/v1/orders`: Создание заказа (из `cart-service`).
        *   `GET /api/v1/orders`: Получение истории своих заказов.
        *   `GET /api/v1/orders/{id}`: Получение деталей конкретного заказа.
    *   **Логика:** При создании заказа сервис должен очищать корзину пользователя (через Kafka или прямой вызов).

3.  **Реализовать `payment-service` (Mock):**
    *   **Цель:** Имитировать успешную или неуспешную оплату.
    *   **API:**
        *   `POST /api/v1/payments`: "Провести" платеж.
    *   **Логика:** Сервис принимает данные заказа, ждет 2 секунды и с вероятностью 95% возвращает статус "Успешно". После этого он отправляет событие в Kafka, на которое подписывается `order-service` для обновления статуса заказа на "Оплачен".

### Этап 3: Интеграция с Frontend
**Цель:** Реализовать пользовательский интерфейс для MVP.
1.  **Страница профиля пользователя:** Интеграция с `user-service`.
2.  **Каталог и карточка товара:** Интеграция с `product-service`.
3.  **Корзина:** Интеграция с `cart-service`.
4.  **Процесс оформления заказа:** Пошаговая форма, интегрированная с `user-service` (адреса), `order-service` и `payment-service`.
5.  **Кабинет продавца:** Базовые формы для создания/редактирования товаров, интегрированные с `product-service`.

### Этап 4: Тестирование и Развертывание MVP
**Цель:** Обеспечить стабильность и запустить продукт.
1.  **End-to-End Тестирование:** Проверка всего основного сценария от регистрации до оформления заказа.
2.  **Нагрузочное тестирование (минимальное):** Проверка, что система выдержит первых пользователей.
3.  **Подготовка Docker-compose:** Создание или обновление `docker-compose.prod.yml` для развертывания всех MVP-сервисов.
4.  **Запуск.**

### Этап 5: Развитие после MVP
1.  Реализация `review-service`.
2.  Реализация `notification-service`.
3.  Интеграция полноценного `search-service` с Elasticsearch.
4.  Разработка `admin-service`.
5.  И так далее.

## 5. Заключение
Этот план обеспечивает сфокусированный подход к разработке, позволяя быстро достичь основной цели — запуска рабочего продукта. Ключ к успеху — строгая приоритизация и концентрация на MVP-функционале.
